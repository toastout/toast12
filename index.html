<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸª í…Œë§ˆ ë§Œë“¤ê¸° ğŸ </title>
    <style>
        @font-face {
            font-family: 'Ridibatang';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_twelve@1.0/RIDIBatang.woff') format('woff');
            font-weight: normal;
            font-display: swap;
        }

        :root {
            /* ê²¨ìš¸ í…Œë§ˆ ìƒ‰ìƒ ê°’ */
			--bgcolor: #abc5de; --darkbg: #c1d2e2; --borderc: #487094; --selected: #eef2f2;
			--draculared: #3a74af; --textcolor: #477094; --textcolor2: #637c97;
			--darkBorderc: #7884a1; --darkbutton: #c1d2e2;
        }

        * { box-sizing: border-box; }

        body {
            font-family: 'Ridibatang', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 0; display: flex; height: 100vh; background-color: #222; color: #fff; overflow: hidden;
        }

        .editor-container { display: flex; width: 100%; height: 100vh; }

        .theme-controller-panel {
            width: 380px; padding: 25px; background-color: #282a36;
            border-right: 2px solid #44475a; overflow-y: auto; flex-shrink: 0; display: flex; flex-direction: column;
        }
        
        /* --- í—¤ë” --- */
        .panel-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px solid #44475a; }
        .panel-header h3 { margin: 0; color: #f8f8f2; font-size: 1.2em; }
        .icon-btn { background: #44475a; border: 1px solid #555869; border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 1.2rem; transition: all 0.3s; text-decoration: none; color: #fff; flex-shrink: 0; }
        .icon-btn:hover { border-color: #bd93f9; transform: scale(1.1); }
        
        .panel-section { background-color: #313442; padding: 20px; border-radius: 8px; margin-bottom: 25px; }
        .panel-section h3 { margin-top: 0; color: #f8f8f2; border-bottom: 1px solid #44475a; padding-bottom: 10px; }
        .color-control { margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center; }
        .color-control .info { flex-grow: 1; }
        .color-control .info label { font-family: 'Ridibatang', sans-serif; font-size: 16px; color: #f8f8f2; font-weight: bold; }
        .color-control .info .description { font-size: 12px; color: #bd93f9; opacity: 0.9; font-family: monospace; }
        .color-control input[type="color"] { -webkit-appearance: none; width: 50px; height: 30px; border: none; padding: 0; background-color: transparent; cursor: pointer; flex-shrink: 0; margin-left: 10px; }
        .color-control input[type="color"]::-webkit-color-swatch-wrapper { padding: 0; }
        .color-control input[type="color"]::-webkit-color-swatch { border: 1px solid #6272a4; border-radius: 4px; }
        #json-input { width: 100%; height: 270px; background-color: #22242d; color: #f1fa8c; border: 1px solid #44475a; border-radius: 4px; padding: 10px; font-family: monospace; font-size: 14px; resize: vertical; }
        .button-group { display: flex; gap: 10px; margin-top: 15px; }
        .button-group button, .preset-control button, #import-json-btn { flex-grow: 1; padding: 10px; border: 1px solid #555869; border-radius: 5px; background-color: #44475a; color: #f8f8f2; cursor: pointer; font-weight: bold; transition: background-color 0.2s; font-family: 'Ridibatang', sans-serif; }
        .button-group button:hover, .preset-control button:hover, #import-json-btn:hover { background-color: #6272a4; }
        .button-group button.primary { background-color: #bd93f9; color: #282a36; border-color: transparent; }
        .button-group button.primary:hover { background-color: #caa9fa; }
        .preset-control { display: grid; grid-template-columns: 1fr auto; gap: 10px; margin-bottom: 10px; }
        .preset-control input, .preset-control select { width: 100%; padding: 8px; background-color: #22242d; border: 1px solid #44475a; color: #f8f8f2; border-radius: 4px; font-family: 'Ridibatang', sans-serif; }
        
        .preview-container { flex-grow: 1; display: flex; width: 100%; height: 100%; position: relative; }
        
        .col-chars, .col-menu, .col-chat { transition: transform 0.3s ease-in-out; }
        
        .col-chars { width: 80px; background-color: var(--bgcolor); padding-top: 10px; display: flex; flex-direction: column; align-items: center; gap: 15px; border-right: 0px solid var(--darkBorderc); flex-shrink: 0; }
        .col-chars .menu-icon { width: 50px; height: 50px; border-radius: 15px; background-color: var(--textcolor2); color: var(--textcolor2); display: grid; place-items: center; font-size: 24px; cursor: pointer; }
        .col-chars .char-avatar { width: 50px; height: 50px; border-radius: 50%; background-color: #808080; color: #FFFFFF; border: 1px solid transparent; cursor: pointer; display: grid; place-items: center; font-size: 28px; font-weight: bold; }
        .col-chars .char-avatar.active { border: 0px solid transparent }
        .col-chars .char-avatar.add-char { margin-top: auto; margin-bottom: 15px; background-color: transparent; border-radius: 50%; border-style: solid; border-color: var(--textcolor2); color: #cccccc; }
        
        .col-menu { width: 320px; background-color: var(--darkbg); display: flex; flex-direction: column; border-right: 0px solid var(--darkBorderc); flex-shrink: 0; padding: 15px; color: var(--textcolor); }
		.char-font-color { color: var(--textcolor2); }
        .menu-tabs { display: flex; border-bottom: 1px solid var(--selected); }
        .menu-tabs button { flex: 1; padding: 10px; background: none; border: none; color: var(--textcolor); font-size: 16px; font-family: 'Ridibatang', sans-serif; cursor: pointer; }
        .menu-tabs button.active { font-weight: bold; }
        .new-chat-btn { width: 100%; padding: 12px; margin: 15px 0; border-radius: 8px; background-color: var(--darkbutton); border: 1px solid var(--draculared); color: var(--textcolor); font-size: 16px; cursor: pointer; }
        .chat-list-item { padding: 12px; border-radius: 8px; margin-bottom: 5px; display: flex; justify-content: space-between; align-items: center; color: var(--textcolor); transition: background-color 0.2s; cursor: pointer;}
        .new-chat-btn:hover, .menu-icon:hover, .chat-list-item:hover { background-color: var(--selected); }
        .chat-list-item.active { background-color: var(--selected); }
        .menu-settings { margin-top: auto; padding-top: 15px; border-top: 1px solid var(--selected); color: var(--textcolor);}
        .setting-item { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .setting-item input[type=checkbox] { accent-color: var(--darkbutton); }
        
        .col-chat { flex-grow: 1; display: flex; flex-direction: column; background-color: #000000; }
        .message-list-static { flex-grow: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; }
        .message-static { display: flex; margin-bottom: 15px; max-width: 80%; }
        .message-static .msg-bubble { padding: 10px 15px; border-radius: 12px; line-height: 1.5; font-family: sans-serif; }
        .message-static.character { align-self: flex-start; }
        .message-static.character .msg-bubble { background-color: #E9E9EB; color: #000000; }
        .message-static.user { align-self: flex-end; }
        .message-static.user .msg-bubble { background-color: #1290FE; color: #ffffff; }
        .chat-input-area-themed { padding: 15px 20px; background-color: var(--bgcolor); border-top: 0px solid var(--darkBorderc); display: flex; gap: 10px; align-items: center; flex-shrink: 0; }
        .chat-input-area-themed input { flex-grow: 1; padding: 12px; border: none; border-radius: 8px; background-color: var(--bgcolor); color: var(--textcolor); border: 1px solid var(--darkBorderc); }
        .chat-input-area-themed button { background-color: transparent; border: none; font-size: 24px; color: var(--draculared); cursor: pointer; padding: 0 10px; }

        .color-textcolor, .color-textcolor2 { color: inherit; } /* Remove conflicting styles */

        /* --- ëª¨ë°”ì¼ ë°˜ì‘í˜• ìŠ¤íƒ€ì¼ --- */
        .mobile-back-btn, .mobile-editor-toggle { display: none; }

        @media (max-width: 768px) {
            .theme-controller-panel {
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                transform: translateX(-100%); transition: transform 0.3s ease-in-out;
                z-index: 100; border-right: none;
            }
            .theme-controller-panel.open { transform: translateX(0); }

            .preview-container { width: 100%; flex-shrink: 0; overflow: hidden; }
            .col-chars, .col-menu, .col-chat {
                position: absolute; top: 0; left: 0; width: 100%; height: 100%;
                visibility: hidden; opacity: 0; transition: opacity 0.2s, visibility 0.2s;
            }
            .col-menu { visibility: visible; opacity: 1; } /* ê¸°ë³¸ í™”ë©´ */
            
            .mobile-back-btn {
                display: block; position: absolute; top: 15px; left: 15px; z-index: 5;
                background: var(--darkbutton); border: none; border-radius: 50%;
                width: 40px; height: 40px; color: var(--selected); font-size: 24px; cursor: pointer;
            }
            .col-chat .mobile-back-btn { color: #333; }

            .mobile-editor-toggle {
                display: grid; place-items: center; position: fixed; bottom: 15px; right: 20px;
                width: 50px; height: 50px; background: #FFFFA2; border: 1px solid #FF6A6A;
                border-radius: 50%; color: #f8f8f2; font-size: 24px; cursor: pointer;
                z-index: 101; box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            }
        }
    </style>
</head>
<body>
    <div class="editor-container">
        <aside class="theme-controller-panel">
            <header class="panel-header">
                <h3>ğŸª í…Œë§ˆ ë§Œë“¤ê¸° ğŸ </h3>
                <a href="https://toastout.github.io/toast/" class="icon-btn" title="í™ˆìœ¼ë¡œ">ğŸ</a>
            </header>
            <div class="panel-section"><h3>ë¹„ì£¼ì–¼ í¸ì§‘ê¸°</h3><div id="visual-editor"></div></div>
            <div class="panel-section"><h3>JSON í¸ì§‘ê¸°</h3><textarea id="json-input"></textarea><div class="button-group"><button id="apply-json-btn" class="primary">í…Œë§ˆ ì ìš©</button><button id="copy-json-btn">JSON ë³µì‚¬</button></div></div>
            <div class="panel-section"><h3>í”„ë¦¬ì…‹ ê´€ë¦¬</h3><div class="preset-control"><input type="text" id="preset-name" placeholder="í”„ë¦¬ì…‹ ì´ë¦„ ì…ë ¥"><button id="save-preset-btn">ì €ì¥</button></div><div class="preset-control"><select id="preset-select"><option value="">í”„ë¦¬ì…‹ ë¶ˆëŸ¬ì˜¤ê¸°</option></select><button id="delete-preset-btn">ì‚­ì œ</button></div><div class="button-group"><button id="import-json-btn">JSON íŒŒì¼ ê°€ì ¸ì˜¤ê¸°</button><button id="export-json-btn">JSON íŒŒì¼ë¡œ ë‚´ë³´ë‚´ê¸°</button></div></div>
            <input type="file" id="json-file-input" accept=".json" style="display: none;">
        </aside>

        <div class="preview-container">
            <aside class="col-chars"><button class="mobile-back-btn">â†</button><div class="menu-icon"><span><font color=#ffffff>â‰¡</font></span></div><div class="char-avatar active">?</div><div class="char-avatar">?</div><div class="char-avatar add-char">+</div></aside>
            <main class="col-menu"><div class="menu-tabs"><button class="active">ì±—</button><button><div  class="char-font-color">ìºë¦­í„°</div></div></button><button class="new-chat-btn">ìƒˆ ì±„íŒ…</button><div class="chat-list"><div class="chat-list-item active"><span>### 001 ì±„íŒ…ë°©</span></div><div class="chat-list-item"><span>### 000 ì±„íŒ…ë°©</span></div></div><div class="menu-settings"><div class="setting-item"><span>íƒˆì˜¥ í† ê¸€</span><input type="checkbox"></div><div class="setting-item"><span>íƒˆì˜¥ ê°•í™”</span><input type="checkbox"></div></div></main>
            <section class="col-chat"><button class="mobile-back-btn">â†</button><br><div class="message-list-static"><div class="message-static character"><div class="msg-bubble">ì±„íŒ…ì°½ì„ ê¾¸ë¯¸ê³  ì‹¶ë‹¤ë©´,<br>ë‹¬ê¸€ ì²« ëŒ“ê¸€ ì²œì‚¬ í ì‹œì˜ ì§‘ ì´ìš©í•˜ê¸°</div></div><div class="message-static user"><div class="msg-bubble">&lt;System&gt; ì´ë¯¸ ì“°ëŸ¬ì§„ í ì‹œì…ë‹ˆë‹¤.</div></div></div><footer class="chat-input-area-themed"><input type="text" placeholder="{{user}}ì˜ í…Œë§ˆ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘..."><button><font color=#ABABAB>â¤</font></button></footer></section>
        </div>
    </div>
    <button class="mobile-editor-toggle">ğŸ </button>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- ê¸°ì¡´ ìŠ¤í¬ë¦½íŠ¸ (ìˆ˜ì • ì—†ìŒ) ---
            const themeProperties = ['bgcolor', 'darkbg', 'borderc', 'selected', 'draculared', 'textcolor', 'textcolor2', 'darkBorderc', 'darkbutton'];
            const themeDescriptions = { 'bgcolor': 'Background', 'darkbg': 'Dark Background', 'borderc': 'Color 1', 'selected': 'Color 2', 'draculared': 'Color 3', 'textcolor': 'Text Color', 'textcolor2': 'Text Color 2', 'darkBorderc': 'Color 4', 'darkbutton': 'Color 5' };
            const visualEditor = document.getElementById('visual-editor'); const jsonInput = document.getElementById('json-input'); const root = document.documentElement; const applyJsonBtn = document.getElementById('apply-json-btn'); const copyJsonBtn = document.getElementById('copy-json-btn'); const exportJsonBtn = document.getElementById('export-json-btn'); const importJsonBtn = document.getElementById('import-json-btn'); const jsonFileInput = document.getElementById('json-file-input'); const savePresetBtn = document.getElementById('save-preset-btn'); const deletePresetBtn = document.getElementById('delete-preset-btn'); const presetNameInput = document.getElementById('preset-name'); const presetSelect = document.getElementById('preset-select');
            function initializeVisualEditor() { visualEditor.innerHTML = ''; themeProperties.forEach(prop => { const value = getComputedStyle(root).getPropertyValue(`--${prop}`).trim(); const control = document.createElement('div'); control.className = 'color-control'; const infoDiv = document.createElement('div'); infoDiv.className = 'info'; const label = document.createElement('label'); label.textContent = themeDescriptions[prop] || prop; const description = document.createElement('div'); description.className = 'description'; description.textContent = `(${prop})`; infoDiv.appendChild(label); infoDiv.appendChild(description); const input = document.createElement('input'); input.type = 'color'; input.dataset.variable = `--${prop}`; input.value = value; input.addEventListener('input', handleColorInputChange); control.appendChild(infoDiv); control.appendChild(input); visualEditor.appendChild(control); }); }
            function handleColorInputChange(event) { const { variable } = event.target.dataset; const newColor = event.target.value; root.style.setProperty(variable, newColor); updateJsonFromCss(); }
            function getCurrentThemeAsObject() { const theme = {}; themeProperties.forEach(prop => { theme[prop] = getComputedStyle(root).getPropertyValue(`--${prop}`).trim(); }); return theme; }
            function updateJsonFromCss() { const currentTheme = getCurrentThemeAsObject(); currentTheme.type = "light"; jsonInput.value = JSON.stringify(currentTheme, null, 2); }
            function applyThemeFromJson() { try { const theme = JSON.parse(jsonInput.value); themeProperties.forEach(prop => { if (theme[prop]) { root.style.setProperty(`--${prop}`, theme[prop]); const input = document.querySelector(`input[data-variable="--${prop}"]`); if(input) input.value = theme[prop]; } }); } catch (e) { alert('ìœ íš¨í•˜ì§€ ì•Šì€ JSON í˜•ì‹ì…ë‹ˆë‹¤.'); } }
            function getPresets() { return JSON.parse(localStorage.getItem('risuai_themes') || '{}'); }
            function savePresets(presets) { localStorage.setItem('risuai_themes', JSON.stringify(presets)); }
            function loadPresetsIntoSelect() { const presets = getPresets(); presetSelect.innerHTML = '<option value="">í”„ë¦¬ì…‹ ë¶ˆëŸ¬ì˜¤ê¸°</option>'; for (const name in presets) { const option = document.createElement('option'); option.value = name; option.textContent = name; presetSelect.appendChild(option); } }
            applyJsonBtn.addEventListener('click', applyThemeFromJson); copyJsonBtn.addEventListener('click', () => { jsonInput.select(); navigator.clipboard.writeText(jsonInput.value).then(() => alert('JSON ì½”ë“œê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.')).catch(err => alert('ë³µì‚¬ ì‹¤íŒ¨: ' + err)); }); exportJsonBtn.addEventListener('click', () => { const blob = new Blob([jsonInput.value], { type: 'application/json' }); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = 'light_theme.json'; a.click(); URL.revokeObjectURL(url); }); importJsonBtn.addEventListener('click', () => jsonFileInput.click()); jsonFileInput.addEventListener('change', (event) => { if (!event.target.files.length) return; const file = event.target.files[0]; const reader = new FileReader(); reader.onload = (e) => { jsonInput.value = e.target.result; applyThemeFromJson(); alert(`'${file.name}' íŒŒì¼ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.`); }; reader.onerror = () => alert('íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'); reader.readAsText(file); event.target.value = null; }); savePresetBtn.addEventListener('click', () => { const name = presetNameInput.value.trim(); if (!name) { alert('í”„ë¦¬ì…‹ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; } const presets = getPresets(); presets[name] = getCurrentThemeAsObject(); savePresets(presets); loadPresetsIntoSelect(); presetSelect.value = name; alert(`'${name}' í”„ë¦¬ì…‹ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.`); }); deletePresetBtn.addEventListener('click', () => { const name = presetSelect.value; if (!name) { alert('ì‚­ì œí•  í”„ë¦¬ì…‹ì„ ì„ íƒí•´ì£¼ì„¸ìš”.'); return; } if (confirm(`'${name}' í”„ë¦¬ì…‹ì„ ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) { const presets = getPresets(); delete presets[name]; savePresets(presets); loadPresetsIntoSelect(); alert(`'${name}' í”„ë¦¬ì…‹ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`); } }); presetSelect.addEventListener('change', (event) => { const name = event.target.value; if (!name) return; const presets = getPresets(); const theme = presets[name]; if (theme) { theme.type = "light"; jsonInput.value = JSON.stringify(theme, null, 2); applyThemeFromJson(); } });
            initializeVisualEditor();
            jsonInput.value = JSON.stringify({ "bgcolor":"#abc5de","darkbg":"#c1d2e2","borderc":"#487094","selected":"#eef2f2","draculared":"#3a74af","textcolor":"#477094","textcolor2":"#637c97","darkBorderc":"#7884a1","darkbutton":"#c1d2e2","type": "light" }, null, 2);
            loadPresetsIntoSelect();

            // --- ëª¨ë°”ì¼ ì „ìš© ìŠ¤í¬ë¦½íŠ¸ ---
            const editorPanel = document.querySelector('.theme-controller-panel');
            const editorToggle = document.querySelector('.mobile-editor-toggle');
            const colChars = document.querySelector('.col-chars');
            const colMenu = document.querySelector('.col-menu');
            const colChat = document.querySelector('.col-chat');
            const menuIcon = document.querySelector('.menu-icon');
            const chatItems = document.querySelectorAll('.chat-list-item');
            const backBtns = document.querySelectorAll('.mobile-back-btn');

            function showColumn(columnToShow) {
                [colChars, colMenu, colChat].forEach(col => {
                    col.style.visibility = 'hidden';
                    col.style.opacity = '0';
                });
                columnToShow.style.visibility = 'visible';
                columnToShow.style.opacity = '1';
            }

            if (window.innerWidth <= 768) {
                editorToggle.addEventListener('click', () => editorPanel.classList.toggle('open'));
                menuIcon.addEventListener('click', () => showColumn(colChars));
                chatItems.forEach(item => item.addEventListener('click', () => showColumn(colChat)));
                backBtns.forEach(btn => btn.addEventListener('click', () => showColumn(colMenu)));
            }
        });
    </script>
</body>
</html>